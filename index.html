<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; connect-src 'self' https://api.dropboxapi.com https://content.dropboxapi.com; object-src 'self' blob:; base-uri 'self'; form-action 'self'">
    <title>EduKanban — Gestor de Actividades</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#35424a">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎓</text></svg>">
</head>
<body>
    <header>
        <img src="icons/logolargo.png" alt="EduKanban" class="logo"/>
        <div class="acciones">
            <button id="abrir-popup-tarea" type="button" class="boton-accion boton-primario">➕ Nueva Actividad</button>
            <a href="recordatorios.html" class="boton-accion boton-primario">⏰ Ver Recordatorios</a>
        </div>
          <!-- Contenedor de Controles -->
    <div class="acciones">
         <a href="archivo.html" class="boton-accion boton-primario">🗄️ Ver Archivo</a>
            <button id="open-admin" type="button" class="boton-accion">⚙️ Administración</button>
            </div>
    </header>
    <main>
   <label id="filter-tag-label" for="filter-tag">Filtrar por etiqueta:</label>
    <select id="filter-tag">
        <option value="">-- Filtrar por etiqueta --</option>
    </select>
    <label id="filter-column-label" style="margin-left:12px;">Ver columnas:</label>
    <div id="filter-column-group" class="filter-columns" aria-label="Ver columnas"></div>
    <div class="filter-column-actions" style="display:inline-flex; gap:8px; margin-left:12px;">
        <button id="filter-column-apply" type="button" class="boton-accion">Aplicar</button>
        <button id="filter-column-reset" type="button" class="boton-accion">Resetear</button>
    </div>

        <div id="task-container"></div>
    </main>

  
       
     <!--   <div class="grupo-botones">
            <h3>Administración</h3>
            <button id="clear-data-btn" type="button" class="boton-accion boton-peligro">🗑️ Limpiar Datos</button>
        </div>
    </div>-->

    <!-- Popup para nueva tarea -->
    <div id="popup-tarea" class="modal">
        <div class="modal-content">
            <form id="popup-task-form">
                <textarea id="popup-task-name" placeholder="Nueva actividad" rows="8"></textarea>
                <select id="popup-task-category">
                    <option value="en-preparacion">En preparación</option>
                    <option value="preparadas">Preparadas</option>
                    <option value="en-proceso">En proceso</option>
                    <option value="pendientes">Pendientes</option>
                </select>
                <label for="popup-task-order">Orden (A–Z)</label>
                <select id="popup-task-order">
                    <option value=""></option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="G">G</option>
                    <option value="H">H</option>
                    <option value="I">I</option>
                    <option value="J">J</option>
                    <option value="K">K</option>
                    <option value="L">L</option>
                    <option value="M">M</option>
                    <option value="N">N</option>
                    <option value="O">O</option>
                    <option value="P">P</option>
                    <option value="Q">Q</option>
                    <option value="R">R</option>
                    <option value="S">S</option>
                    <option value="T">T</option>
                    <option value="U">U</option>
                    <option value="V">V</option>
                    <option value="W">W</option>
                    <option value="X">X</option>
                    <option value="Y">Y</option>
                    <option value="Z">Z</option>
                </select>
                <textarea id="popup-task-tags" placeholder="Etiquetas (separadas por comas)" rows="3"></textarea>
                <datalist id="all-tags-list"></datalist>
                <div id="tag-suggestions" class="tag-suggestions"></div>
                <label for="popup-task-reminder">Recordatorio (fecha y hora)</label>
                <input type="datetime-local" id="popup-task-reminder">
                <label for="popup-task-attachments">Adjuntos</label>
                <input type="file" id="popup-task-attachments" multiple>
                <div id="popup-existing-attachments" class="attachments"></div>
                <button type="button" id="popup-attach-reuse-toggle" class="boton-accion">🔁 Reutilizar adjunto</button>
                <div id="popup-attach-reuse-panel" class="reuse-panel" style="display:none"></div>
                <div class="acciones-popup">
                    <button type="submit">Añadir</button>
                    <button type="button" id="cancelar-popup">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de confirmación genérico -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content">
            <div id="confirm-message" class="confirm-message">¿Confirmas esta acción?</div>
            <div class="acciones-popup">
                <button type="button" id="confirm-accept" class="boton-peligro">Eliminar</button>
                <button type="button" id="confirm-cancel">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Administración -->
    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <h2>Administración</h2>
            <div class="grupo-botones" id="lang-group">
                <h3>Idioma</h3>
                <select id="lang-select">
                    <option value="es">Español</option>
                    <option value="val">Valencià</option>
                </select>
            </div>
            <div class="grupo-botones" id="sync-group-modal">
                <h3>Sincronización</h3>
                <button id="dropbox-login" type="button" class="boton-accion">Conectar con Dropbox</button>
                <button id="dropbox-sync" type="button" class="boton-accion" style="display:none;">Sincronizar</button>
            </div>
            <div class="grupo-botones" id="backup-group">
                <h3>Copia de seguridad</h3>
                <button id="backup-export" type="button" class="boton-accion">📤 Exportar copia</button>
                <button id="backup-import" type="button" class="boton-accion">📥 Importar copia</button>
                <input id="backup-file-input" type="file" accept="application/json" style="display:none" />
            </div>
            <div class="acciones-popup">
                <button type="button" id="admin-close">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Visor de imagen a pantalla casi completa -->
    <div id="image-lightbox" class="modal image-lightbox" style="display:none">
        <img id="image-lightbox-img" alt="preview" />
    </div>

    <footer>
        <script src="js/i18n.js"></script>
        <script src="js/app.js"></script>
        <script src="js/sw-register.js"></script> EduKanban — v0.0.51<span id="sw-version"></span>
    </footer>

</body>
</html>
